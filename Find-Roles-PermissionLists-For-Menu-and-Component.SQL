--- Created by Tirumala Rao Chimpiri
--  SQL to find the PeopleSoft Roles and Permission Lists for a given PeopleSoft Menu and Component
--- For example, below SQL provides the roles and permission lists for "Message Catalog" component
 
SELECT ROLE_CLASS.ROLENAME,
       ROLE_CLASS.CLASSID,
       AUTH_ITEM.MENUNAME,
       AUTH_ITEM.BARITEMNAME,
       AUTH_ITEM.PNLITEMNAME,
       CASE AUTH_ITEM.DISPLAYONLY
          WHEN 0 THEN 'UPDATE_ACCESS'
          WHEN 1 THEN 'DISPLAY ONLY ACCESS'
       END
          ACCESS_TYPE,
       AUTH_ITEM.DISPLAYONLY
  FROM PSROLECLASS ROLE_CLASS,      
       PSAUTHITEM AUTH_ITEM,
       PSMENUITEM MENU_ITEM,
       PSPNLGROUP COMP
 WHERE     ROLE_CLASS.CLASSID = AUTH_ITEM.CLASSID
       AND AUTH_ITEM.MENUNAME = MENU_ITEM.MENUNAME
       AND AUTH_ITEM.BARITEMNAME = MENU_ITEM.ITEMNAME
       AND AUTH_ITEM.PNLITEMNAME = COMP.ITEMNAME
       AND MENU_ITEM.PNLGRPNAME = COMP.PNLGRPNAME
       AND ROLE_CLASS.ROLENAME IN (SELECT DISTINCT ROLENAME FROM PSROLEUSER)
       AND AUTH_ITEM.MENUNAME = 'UTILITIES'
       AND MENU_ITEM.PNLGRPNAME = 'MESSAGE_CATALOG1';